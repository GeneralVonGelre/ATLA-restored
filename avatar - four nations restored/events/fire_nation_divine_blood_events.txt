namespace = FNDB

#FNDB.1 -> Give newborns Divine Blood trait.
#FNDB.2 -> Gain Divine Blood from Modernization War.

#FNDB.10 -> Create some ships for the AI after a Modernization War.

#FNDB.1 -> Give newborns Divine Blood trait.
character_event = {
	id = FNDB.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			mother_even_if_dead = {
				has_divine_blood = yes
			}
			father_even_if_dead = {
				has_divine_blood = yes
			}
		}
	}
	
	immediate = {
		set_variable = { which = divine_blood_intensity value = 0 }
		father_even_if_dead = {
			trigger_switch = {
				on_trigger = trait
				divine_blood1 = { PREV = { change_variable = { which = divine_blood_intensity value = 1 } } }
				divine_blood2 = { PREV = { change_variable = { which = divine_blood_intensity value = 2 } } }
				divine_blood3 = { PREV = { change_variable = { which = divine_blood_intensity value = 3 } } }
				divine_blood4 = { PREV = { change_variable = { which = divine_blood_intensity value = 4 } } }
				divine_blood5 = { PREV = { change_variable = { which = divine_blood_intensity value = 5 } } }
			}
		}
		mother_even_if_dead = {
			trigger_switch = {
				on_trigger = trait
				divine_blood1 = { PREV = { change_variable = { which = divine_blood_intensity value = 1 } } }
				divine_blood2 = { PREV = { change_variable = { which = divine_blood_intensity value = 2 } } }
				divine_blood3 = { PREV = { change_variable = { which = divine_blood_intensity value = 3 } } }
				divine_blood4 = { PREV = { change_variable = { which = divine_blood_intensity value = 4 } } }
				divine_blood5 = { PREV = { change_variable = { which = divine_blood_intensity value = 5 } } }
			}
		}
		if = {
			limit = {
				check_variable = { which = divine_blood_intensity value >= 10 }
			}
			add_trait = divine_blood5
		} else_if = {
			limit = {
				check_variable = { which = divine_blood_intensity value >= 8 }
			}
			add_trait = divine_blood4
		} else_if = {
			limit = {
				check_variable = { which = divine_blood_intensity value >= 6 }
			}
			add_trait = divine_blood3
		} else_if = {
			limit = {
				check_variable = { which = divine_blood_intensity value >= 4 }
			}
			add_trait = divine_blood2
		} else = {
			add_trait = divine_blood1
		}
	}
}

#FNDB.2 -> Gain Divine Blood from Modernization War.

character_event = {
	id = FNDB.2
	desc = FNDB2_desc
	picture = GFX_evt_firebenders_fight
	border = GFX_event_normal_frame_war
	is_triggered_only = yes
	
	option = {
		trigger = {
			has_education_martial_trigger = yes
			NOT = { has_character_flag = had_divine_blood_upgrade }
		}
		name = FNDB2_martial_option
		upgrade_education_effect = yes
		upgrade_divine_blood = yes
		set_character_flag = had_divine_blood_upgrade
	}
	
	option = {
		trigger = {
			has_education_stewardship_trigger = yes
			NOT = { has_character_flag = had_divine_blood_upgrade }
		}
		name = FNDB2_stewardship_option
		upgrade_education_effect = yes
		upgrade_divine_blood = yes
		set_character_flag = had_divine_blood_upgrade
	}
	
	option = {
		name = FNDB2_default_option
		trigger = {
			OR = {
				has_character_flag = had_divine_blood_upgrade
				NOT = {
					has_education_stewardship_trigger = yes
					has_education_martial_trigger = yes
				}
			}
		}
		
		upgrade_divine_blood = yes
		set_character_flag = had_divine_blood_upgrade
	}	
}

#FNDB.3 -> Gain Divine Blood from Modernization War.

#FNDB.10 ->Create some ships for the AI after a Modernization War.
character_event = {
	id = FNDB.10
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		ai = yes
	}

	immediate = {
		spawn_fleet = {
			province = closest # closest sea zone
			owner = ROOT
			disband_on_peace = no
			troops = {
				galleys = { 20 20 }
			}
			earmark = modernized_fleet
		}
	}
}